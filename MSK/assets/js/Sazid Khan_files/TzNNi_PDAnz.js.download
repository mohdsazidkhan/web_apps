if (self.CavalryLogger) { CavalryLogger.start_js(["ssFnn"]); }

__d('OGHovercardFeedback',['Event','Arbiter','CSS','DOM','ScrollableArea','TextAreaControl','UFIUIEvents','ge'],(function a(b,c,d,e,f,g){Object.assign(h,{init:function i(j,k,l){new h(j,k,l);}});function h(i,j,k){this._hovercard=i;this._focusListener=null;for(var l=0;l<j.length;l++)this.conditionClassOnHovercard(j[l],k);c('Arbiter').subscribe(c('UFIUIEvents').Comment,function(m,n){this._scrollComments(n.isinverted?'toTop':'toBottom');}.bind(this));i.subscribe('show',this._initCommentTextAreaAndFocusListener.bind(this));}Object.assign(h.prototype,{conditionClassOnHovercard:function i(j,k){var l=c('ge')(j);this._hovercard.subscribe('beforeshow',function(){c('CSS').addClass(l,k);});this._hovercard.subscribe('hide',function(){c('CSS').removeClass(l,k);});},_scrollComments:function i(j){var k=this._hovercard.getContent(),l=k&&c('DOM').scry(k,'.uiScrollableAreaWrap')[0],m=l&&c('ScrollableArea').getInstance(l);if(j==='toTop'){m&&m.scrollToTop();}else m&&m.scrollToBottom();},_initCommentTextAreaAndFocusListener:function i(){var j=this._hovercard.getContent(),k=j&&c('DOM').scry(j,'.ogHovercardFooter textarea')[0];if(k){var l=c('TextAreaControl').getInstance(k);if(l&&l.isEmpty())l.clear();if(this._focusListener)return;this._focusListener=c('Event').listen(k,'focus',this._scrollComments.bind(this));}}});f.exports=h;}),null);